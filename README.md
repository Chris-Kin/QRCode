> A QRCode generator built by javascript  

# QR二维码编码过程解析
二维码分很多种，本文仅讨论QRCode。  
大体上，QRCode的编码过程分四步：  
1. 数据分析
2. 数据编码
3. 纠错码编码
4. 结构化数据编码与纠错码
5. 生成矩阵
6. 掩码
7. 添加格式与版本信息

下文我们对以上步骤逐一讲解

## 数据分析
待编码数据分为四类：
- 数字
- 字母
- 字节
- Kanj

每种格式的数据都有特定的编码规则，将待编码数据转换成尽可能短的二进制字符串。当然混合编码模式是存在的。

##  数据编码

### 选择纠错级别

| 纠错级别 | 纠错水平 |
| ------------- |:-------------:|
| L | 7% |
| M | 15% |
| Q | 25% |
| H | 30% |
注意，纠错级别越高，要包含的纠错字节也就越多，导致二维码越大。

### 选择二维码版本
QRCode有四十个版本 v1~v40，对应的大小为21*21 ~ 177*177。不同版本所能承载的最大字符串（包含纠错码）长度不同。
[各个版本最大承载字符串长度](http://www.thonky.com/qr-code-tutorial/character-capacities
)  
给定待编码字符和纠错级别后，对照该表格即可确定二维码版本  
### 生成所选编码模式信息
```
  Numeric: '0001',
  Alphanumeric: '0010',
  Byte: '0100',
  Kanji: '1000',
  ECI: '0111',
```
### 添加待编码字符长度信息，紧随模式信息后面
用多少位二进制来表示字符长度信息，是由二维码版本和编码模式共同决定的 [戳这里](http://www.thonky.com/qr-code-tutorial/data-encoding)  
